{# templates/partials/_menu_card.html #}
<div class="relative bg-white/85 backdrop-blur rounded-2xl border border-[#3e2723]/10 shadow-sm hover:shadow-md transition overflow-hidden ring-offset-2"
     data-menu-card
     data-item-id="{{ item.id }}"
     data-base-price="{{ item.price }}"
     data-has-item-discount="{% if item.discount_price %}1{% else %}0{% endif %}">

  <div class="p-4 sm:p-5">
    <div class="flex gap-4 items-start">

      <!-- Text -->
      <div class="flex-1 min-w-0">
        <button type="button"
                class="w-full text-left group"
                data-item-url="{% url 'restaurant:menu_item_detail' item.id %}?ctx=menu">

          <div class="flex items-start gap-2">
            <h3 class="text-base sm:text-lg font-semibold text-[#3e2723] leading-snug truncate group-hover:underline underline-offset-4">
              {{ item.name }}
            </h3>

            {% if item.discount_percentage %}
              <span class="shrink-0 inline-flex items-center rounded-full bg-red-600 text-white text-[11px] font-bold px-2 py-0.5">
                -{{ item.discount_percentage }}%
              </span>
            {% endif %}
          </div>

          {% if item.description %}
            <p class="mt-1 text-sm text-[#3e2723]/70 leading-relaxed line-clamp-2">
              {{ item.description }}
            </p>
          {% endif %}

          <!-- Price -->
          <div class="mt-3 flex items-baseline gap-2" data-price-wrap>
            {% if item.discount_price %}
              <span class="text-sm text-[#3e2723]/45 line-through" data-price-strike>
                € {{ item.price }}
              </span>
              <span class="text-lg font-bold text-red-600" data-price-normal>
                € {{ item.discount_price }}
              </span>
              <span class="text-lg font-bold text-red-600 hidden" data-price-coupon></span>
            {% else %}
              <span class="text-sm text-[#3e2723]/45 line-through hidden" data-price-strike></span>
              <span class="text-lg font-bold text-[#3e2723]" data-price-normal>
                € {{ item.price }}
              </span>
              <span class="text-lg font-bold text-red-600 hidden" data-price-coupon></span>
            {% endif %}
          </div>
        </button>
      </div>

      <!-- Image + add -->
      <div class="relative w-28 h-24 sm:w-32 sm:h-28 shrink-0">
        <button type="button"
                data-item-url="{% url 'restaurant:menu_item_detail' item.id %}?ctx=menu"
                class="w-full h-full rounded-xl overflow-hidden border border-[#3e2723]/10 bg-[#f5f0e6]">
          {% if item.image %}
            <img src="{{ item.image.url }}"
                 class="w-full h-full object-cover hover:scale-105 transition duration-300"
                 alt="{{ item.name }}">
          {% else %}
            <div class="w-full h-full flex items-center justify-center text-xs text-[#3e2723]/45">
              No image
            </div>
          {% endif %}
        </button>

        <!-- Qty badge when in cart -->
        <div data-qty-badge
             class="hidden absolute -top-2 -left-2 min-w-[26px] h-7 px-2 rounded-full bg-[#1f6feb] text-white text-xs font-bold
                    flex items-center justify-center shadow-lg">
          0
        </div>

        <!-- Add button -->
        <button type="button"
                aria-label="Add"
                data-add-delivery="{{ item.id }}"
                class="absolute -right-2 -bottom-2 h-10 w-10 rounded-full
                       bg-[#1f6feb] text-white text-2xl leading-none
                       flex items-center justify-center shadow-lg
                       hover:shadow-xl active:scale-95 transition">
          +
        </button>
      </div>

    </div>
  </div>

  <div class="h-1 w-full bg-gradient-to-r from-transparent via-[#bfa76f]/40 to-transparent"></div>
</div>
